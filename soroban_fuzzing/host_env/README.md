# Fuzzing host functions

This fuzzes from inside the `soroban-env-host` crate by instanciating a default `Host` and generating a list of methods 
to call. The raw bytes generated by the fuzzer are interpreted using the `arbitrary` crate to generate a list of calls 
to various host functions. The arguments are generated randomly. 

The harness has been tested most recently with the `rs-soroban-env` release "20.2.1" (https://github.com/stellar/rs-soroban-env/releases/tag/v20.2.1)

If you want to run it on your own machine or an EC2 instance, see below.

## How to Run on an EC2 instance

Directions to run on the EC2 instance:

1. Copy this directory to the EC2 instance.

2. Download Rustup and install Rust: https://www.rust-lang.org/tools/install

3. Install gcc toolchain: `sudo apt install build-essential`

3. Install cargo-fuzz: `cargo install cargo-fuzz`

4. Run the command: `nohup host_env/run.sh "$RESULTS_DIR" "$VERSION" "$FUZZ_TARGET" &`

`RESULTS_DIR`: Path to a directory where fuzzer logs will be stored.

`VERSION`: Version of rs-soroban-env crate against which the fuzzer will run. E.g. - v20.2.1

`FUZZ_TARGET`: Fuzz target to run. E.g. - host_funcs

